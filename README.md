## Создание локального образа контейнера для разработки

Все необходимые файлы находятся в каталоге `image`  
В файле req.txt находится список пакетов у которых есть бинарные зависимости и которые нужно компилировать (собирать)  
В файле requirements.txt находится список необходимых пакетов  
`entrypoint.sh` содержит скрипт проверки готовности БД и выполнения миграций перед стартом WSGI сервера gunicorn
Сборка образа контейнера с именем `robodjango3.8:latest` осуществляется следующей командой  
`docker build -f Dockerfile.bindep -t robodjango3.8:latest .`

Удаляется образ командами:  
`docker image rm robodjango3.8:latest`
`docker image prune -y`

## Работа с проектом

файл `env_settings.py` содержит код для использования переменных окружения для конфигурирования контейнера  
в файлах `.env_db` и `.env_app` содержатся переменные окружения для контейнера с проектом Django, переменные для пользователя, БД и пароля пользователя берутся из `.env_db`. В случае, если требуется изменить название БД, в файл `.env_app` добавляем переменную `POSTGRES_DB`  
в каталоге `postgredb` нужно удалить файл-заглушку, в каталоге содержатся файлы БД  
в каталоге `django` размещается проект, на уровне этого каталога должен размещаться `manage.py`

Порядок использования:

1. удаляем файл из каталога postgresdb `rm postgresdb/*`
2. копируем проект в каталог django
3. в каталог проекта копируем файл env_settings.py
4. в каталоге проекта редактируем файл settings.py, добавляя в конец файла импорт (пример импорта находится в комментарии env_settings.py)
5. в файле docker-compose.yml, в строке 13 заменяем mainapp на название проекта, находящегося в каталоге django
6. запускаем проект `docker-compose up -d`
7. по адресу localhost:8081 доступен интерфейс администрирования ДБ
8. по адресу localhost:8001 доступен сайт проекта
9. проект удаляется при помощи команды `docker-compose down`

## Управление

В скоупе docker-compose контейнеры называются следующим образом:

1. db - контейнер БД
2. django - контейнер приложения
3. nginx - контейнер веб-сервера
4. adminer - контейнер web-управление БД.

Перезапустить контейнера:  
`docker-compose restart <container-name>`

Просмотр логов контейнера:  
`docker-compose logs <container-name>`
